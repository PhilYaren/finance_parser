# üì¶ finance_parser

`finance_parser` ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏ –Ω–∞–±–æ—Ä CLI-—É—Ç–∏–ª–∏—Ç –¥–ª—è —á—Ç–µ–Ω–∏—è, –∑–∞–ø–∏—Å–∏, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ **CSV**, **TXT** –∏ **BIN**.  
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API, —É–¥–æ–±–Ω—ã–µ CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ß—Ç–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —Ñ–æ—Ä–º–∞—Ç–æ–≤ **CSV / TXT / BIN**
- –ó–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –ª—é–±–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞
- CLI-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ (`ya_parser`)
- CLI-—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Ñ–∞–π–ª–æ–≤ (`comparator`)
- –ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö `Transaction`
- –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Ç—Ä–µ–π—Ç `Parser`

---

## ü™ù Pre-commit —Ö—É–∫–∏ (hk)

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è hk –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è pre-commit —Ö—É–∫–∞–º–∏.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ hk

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:

### [—Å—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É](https://hk.jdx.dev/getting_started.html)

—É—Å—Ç–∞–Ω–æ–≤–∫–∞ hk –≥–ª–æ–±–∞–ª—å–Ω–æ

```zsh
cargo install hk
```

—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å cli –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å pkl
```zsh
brew install pkl
```

–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è hk –≤ –ø—Ä–æ–µ–∫—Ç–µ
```zsh
hk install
```

–•—É–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –∏ –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º 

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```plaintext
finance_parser/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ args.rs             # CLI: cli –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è ya_parser
‚îÇ   ‚îú‚îÄ‚îÄ lib.rs              # –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã, —Ç—Ä–µ–π—Ç Parser, —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ error.rs            # –¢–∏–ø—ã –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ csv_parser.rs       # CSV-–ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ txt_parser.rs       # TXT-–ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ bin_parser.rs       # BIN-–ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ main.rs             # CLI: ya_parser
‚îÇ   ‚îî‚îÄ‚îÄ bin/
‚îÇ       ‚îî‚îÄ‚îÄ comparator/
‚îÇ           ‚îî‚îÄ‚îÄ main.rs     # CLI: comparator
‚îÇ           ‚îî‚îÄ‚îÄ args.rs     # CLI: cli –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è comparator
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ examples/               # –ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ Cargo.toml
‚îî‚îÄ‚îÄ README.md
```
---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–õ–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Cargo

```zsh
cargo install --path .
```

–£—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∏:

ya_parser

comparator
---

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI
üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

```zsh
ya_parser <input-file> <output-name> <to-format>
```

–ü—Ä–∏–º–µ—Ä—ã:

```zsh
ya_parser --input-file=records.txt --output-name=converted.csv --to-format=bin
```

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä—Å–µ—Ä.


üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —Ñ–∞–π–ª–æ–≤
```zsh
comparator <first-file> <second-file>
```


–ü—Ä–∏–º–µ—Ä:

```zsh
comparator --first-file=records.csv --second-file=records.txt
```


–£—Ç–∏–ª–∏—Ç–∞ —Å—Ä–∞–≤–Ω–∏—Ç –Ω–∞–±–æ—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Å–æ–æ–±—â–∏—Ç, —Å–æ–≤–ø–∞–¥–∞—é—Ç –ª–∏ –æ–Ω–∏.
---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```rust
pub struct Transaction {
    pub tx_id: u64,
    pub tx_type: Type,
    pub status: Status,
    pub from_user_id: u64,
    pub to_user_id: u64,
    pub amount: u64,
    pub timestamp: u64,
    pub description: String,
}
```

---

## üìÑ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
### CSV

–ó–∞–≥–æ–ª–æ–≤–æ–∫:
```
TX_ID,TX_TYPE,FROM_USER_ID,TO_USER_ID,AMOUNT,TIMESTAMP,STATUS,DESCRIPTION
```
### TXT (–∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:

```
# Record 1 (DEPOSIT)
TX_ID: 123
TX_TYPE: DEPOSIT
STATUS: SUCCESS
FROM_USER_ID: 1
TO_USER_ID: 2
TIMESTAMP: 1620000000
AMOUNT: 100
DESCRIPTION: Test
```

### BIN

–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç:

–ü–æ–ª–µ	–¢–∏–ø
Magic "YPBN"	4 bytes
–î–ª–∏–Ω–∞ –∑–∞–ø–∏—Å–∏	u32
JSON —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è	bytes
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```zsh
cargo test
```

–¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:
–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–æ–≤



---

## ‚öôÔ∏è GitHub Actions

CI —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤:
```
.github/workflows/rust-ci.yml
```

–û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

```zsh
cargo fmt --check
```
```zsh
cargo test
```
```zsh
cargo build
```

---

## üß© –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç, —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Ç—Ä–µ–π—Ç:

```rust
impl Parser for MyParser {
    fn read(reader: &mut impl Read) -> Result<Vec<Transaction>, ReadError> {
        ...
    }

    fn write(writer: &mut impl Write, txs: &[Transaction]) -> Result<(), WriteError> {
        ...
    }
}
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ CLI.

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
### MIT
